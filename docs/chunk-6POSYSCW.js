import{a as ue,b as ve}from"./chunk-CG6FHUDI.js";import{c as le,d as de,f as pe,g as se}from"./chunk-YRM76I5L.js";import{b as me,c as ce}from"./chunk-BQ3RKKWB.js";import{G as re,N as oe,t as te,u as ae,v as ie,w as ne}from"./chunk-ZBSQAANU.js";import{c as $,d as ee}from"./chunk-FIFEGGVG.js";import"./chunk-2CUWROGR.js";import{a as H}from"./chunk-3WX7UY72.js";import"./chunk-YUQJCTRW.js";import{c as Z,e as X,f as q,i as K,j as J,k as Y}from"./chunk-XANFHYTR.js";import{e as B,h as G,m as j}from"./chunk-WE3BECVD.js";import{Na as S,Ra as P,Va as z,t as W,vb as U,wb as Q}from"./chunk-UABIDNIC.js";import{$a as M,$b as k,Bb as _,Fb as g,Gb as s,Lb as A,Mb as V,Nb as R,Oa as p,Rb as d,Sb as D,Ta as C,Tb as N,Vb as f,Wb as h,Xb as b,Yb as O,Zb as L,aa as m,ba as c,fb as x,lc as F,mb as u,pa as E,pb as T,vb as a,wb as i,xb as v}from"./chunk-AN2PFFFI.js";import{a as I,b as y}from"./chunk-EQDQRRRY.js";var ge=["dt"],fe=()=>({width:"600px"}),he=(l,n)=>["/admin-area/parvada",l,n];function be(l,n){if(l&1){let e=_();a(0,"p-button",10),g("onClick",function(){m(e);let t=s();return c(t.openNew())}),i()}}function Ce(l,n){if(l&1){let e=_();a(0,"div",11)(1,"h5",12),d(2,"ADMINISTRACI\xD3N DE PARVADAS"),i(),a(3,"p-iconfield"),v(4,"p-inputicon",13),a(5,"input",14),g("input",function(t){m(e);let o=s();return c(o.onGlobalFilter(t))}),i()()()}}function xe(l,n){l&1&&(a(0,"tr")(1,"th"),d(2,"FOLIO"),i(),a(3,"th"),d(4,"NOMBRE"),i(),a(5,"th"),d(6,"DESCRIPCI\xD3N"),i(),a(7,"th"),d(8,"# POLLOS"),i(),a(9,"th"),d(10,"FECHA INICIO"),i(),a(11,"th"),d(12,"FECHA DE FIN"),i(),v(13,"th"),i())}function De(l,n){if(l&1){let e=_();a(0,"tr"),v(1,"td"),a(2,"td")(3,"a",15),d(4),i()(),a(5,"td"),d(6),i(),a(7,"td"),d(8),i(),a(9,"td"),d(10),i(),v(11,"td"),a(12,"td")(13,"p-button",16),g("click",function(){let t=m(e).$implicit,o=s();return c(o.editParvada(t))}),i(),a(14,"p-button",17),g("click",function(){let t=m(e).$implicit,o=s();return c(o.deleteParvada(t))}),i()()()}if(l&2){let e=n.$implicit,r=s();p(3),u("routerLink",k(7,he,r.zona,e.nombre)),p(),N(" ",e.nombre," "),p(2),D(e.descripcion),p(2),D(e.numPollos),p(2),D(e.fechaIngreso),p(3),u("outlined",!0),p(),u("outlined",!0)}}function Se(l,n){if(l&1){let e=_();a(0,"div",18)(1,"div",19)(2,"label",20),d(3,"NOMBRE"),i(),a(4,"input",21),b("ngModelChange",function(t){m(e);let o=s();return h(o.parvada.nombre,t)||(o.parvada.nombre=t),c(t)}),i()(),a(5,"div",19)(6,"label",22),d(7,"DESCRIPCION"),i(),a(8,"input",23),b("ngModelChange",function(t){m(e);let o=s();return h(o.parvada.descripcion,t)||(o.parvada.descripcion=t),c(t)}),i()(),a(9,"div",19)(10,"label",24),d(11,"CANTIDAD DE POLLOS"),i(),a(12,"p-inputnumber",25),b("ngModelChange",function(t){m(e);let o=s();return h(o.parvada.numPollos,t)||(o.parvada.numPollos=t),c(t)}),i()(),a(13,"div",19)(14,"label",26),d(15,"FECHA DE INGRESO"),i(),a(16,"input",27),b("ngModelChange",function(t){m(e);let o=s();return h(o.parvada.fechaIngreso,t)||(o.parvada.fechaIngreso=t),c(t)}),i()()()}if(l&2){let e=s();p(4),f("ngModel",e.parvada.nombre),p(4),f("ngModel",e.parvada.descripcion),p(4),f("ngModel",e.parvada.numPollos),u("min",0),p(4),f("ngModel",e.parvada.fechaIngreso)}}function Pe(l,n){if(l&1){let e=_();a(0,"p-button",28),g("click",function(){m(e);let t=s();return c(t.hideDialog())}),i(),a(1,"p-button",29),g("click",function(){m(e);let t=s();return c(t.saveParvada())}),i()}}var _e=class l{constructor(n,e,r,t){this.route=n;this.dataService=e;this.messageService=r;this.confirmationService=t}parvadas=E([]);parvada;parvadaDialog=!1;submitted=!1;selectedParvadas=[];zona="";dt;ngOnInit(){this.route.paramMap.subscribe(n=>{this.zona=n.get("zona")||"",this.zona&&this.loadParvadasByZona(this.zona)})}loadParvadasByZona(n){this.dataService.getData().subscribe(e=>{let r=e.parvadas?.[n]||[];this.parvadas.set(r.map((t,o)=>y(I({},t),{id:n+"-PV"+(o+1)})))})}openNew(){this.parvada={id:"",nombre:"",descripcion:"",numPollos:0,fechaIngreso:new Date().toISOString().slice(0,10)},this.submitted=!1,this.parvadaDialog=!0}editParvada(n){this.parvada=I({},n),this.parvadaDialog=!0}deleteParvada(n){this.confirmationService.confirm({message:`\xBFESTAS SEGURO DE ELIMINAR LA PARVADA "${n.nombre}"?`,header:"CONFIRMAR",icon:"pi pi-exclamation-triangle",acceptLabel:"SI",rejectLabel:"NO",accept:()=>{this.parvadas.set(this.parvadas().filter(e=>e.id!==n.id)),this.messageService.add({severity:"success",summary:"\xC9XITO",detail:"PARVADA ELIMINADA",life:3e3})}})}saveParvada(){this.submitted=!0,this.parvada.nombre.trim()&&(this.parvada.id?this.parvadas.set(this.parvadas().map(n=>n.id===this.parvada.id?this.parvada:n)):(this.parvada.id=this.zona+"-PV"+(this.parvadas().length+1),this.parvadas.set([...this.parvadas(),this.parvada])),this.messageService.add({severity:"success",summary:"\xC9XITO",detail:"PARVADA GUARDADA",life:3e3}),this.parvadaDialog=!1)}hideDialog(){this.parvadaDialog=!1,this.submitted=!1}onGlobalFilter(n){let e=n.target.value;this.dt.filterGlobal(e,"contains")}static \u0275fac=function(e){return new(e||l)(C(B),C(H),C(P),C(S))};static \u0275cmp=M({type:l,selectors:[["app-parvada-dashboard"]],viewQuery:function(e,r){if(e&1&&A(ge,5),e&2){let t;V(t=R())&&(r.dt=t.first)}},features:[O([P,S])],decls:14,vars:10,consts:[["start",""],["dt",""],[1,"mb-4"],["dataKey","id",3,"value","paginator","rows","rowHover"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","PARVADA",3,"visibleChange","visible","modal","closable"],["pTemplate","content"],["pTemplate","footer"],["label","NUEVO","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],[3,"routerLink"],["icon","pi pi-pencil",1,"mr-2",3,"click","outlined"],["icon","pi pi-trash","severity","danger",3,"click","outlined"],[1,"p-fluid","formgrid","grid","gap-3"],[1,"field","col-12","md:col-6"],["for","nombre"],["id","nombre","type","text","pInputText","",1,"w-full",3,"ngModelChange","ngModel"],["for","descripcion"],["id","descripcion","type","text","pInputText","",1,"w-full",3,"ngModelChange","ngModel"],["for","pollos"],["inputId","pollos",1,"w-full",3,"ngModelChange","ngModel","min"],["for","fechaIngreso"],["type","date","pInputText","",1,"w-full",3,"ngModelChange","ngModel"],["label","CANCELAR","icon","pi pi-times","text","",3,"click"],["label","GUARDAR","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let t=_();a(0,"p-toolbar",2),x(1,be,1,0,"ng-template",null,0,F),i(),v(3,"br"),a(4,"p-table",3,1),x(6,Ce,6,0,"ng-template",4)(7,xe,14,0,"ng-template",5)(8,De,15,10,"ng-template",6),i(),a(9,"p-dialog",7),b("visibleChange",function(w){return m(t),h(r.parvadaDialog,w)||(r.parvadaDialog=w),c(w)}),x(10,Se,17,5,"ng-template",8)(11,Pe,2,0,"ng-template",9),i(),v(12,"p-toast")(13,"p-confirmdialog")}e&2&&(p(4),u("value",r.parvadas())("paginator",!0)("rows",10)("rowHover",!0),p(5),T(L(9,fe)),f("visible",r.parvadaDialog),u("modal",!0)("closable",!1))},dependencies:[W,K,Z,X,q,oe,re,z,de,le,Q,U,se,pe,ce,me,Y,J,ve,ue,ae,te,ne,ie,ee,$,j,G],encapsulation:2})};export{_e as ParvadaDashboardComponent};
