import{b as W}from"./chunk-VYT4VVOU.js";import{a as P,b as B}from"./chunk-C7GRVOAO.js";import{b as x,c as K}from"./chunk-FGSFZRNY.js";import{d as N}from"./chunk-F3B4DRXO.js";import{a as F}from"./chunk-3FZEPC3C.js";import"./chunk-GLSPFAUM.js";import{e as T}from"./chunk-EXJJF4RX.js";import{Cb as O,Eb as L,Fb as R,Gb as w,Ra as f,Va as _,rb as I,t as C,tb as A,ub as k,vb as D,xb as E}from"./chunk-C37TLAZK.js";import{$a as M,Fb as z,Gb as S,Oa as l,Rb as d,Sb as y,Ta as c,Vb as p,Wb as u,Xb as g,Yb as v,fb as b,mb as m,vb as i,wb as a,xb as h}from"./chunk-AN2PFFFI.js";import"./chunk-EQDQRRRY.js";function Z(s,n){if(s&1&&(i(0,"div",15)(1,"span",16),d(2,"DETALLE DE KAZETA"),a(),i(3,"span",17),d(4),a()()),s&2){let o=S();l(4),y((o.kazeta==null?null:o.kazeta.nombre)||"CARGANDO...")}}var j=class s{constructor(n,o,e){this.route=n;this.dataService=o;this.messageService=e}kazetaId=0;kazeta=null;alimento=null;mortalidad=null;loading=!1;editMode=!1;ngOnInit(){this.route.params.subscribe(n=>{this.kazetaId=+n.id,this.dataService.getData().subscribe(o=>{this.cargarKazeta(o)})})}cargarKazeta(n){let o=JSON.parse(localStorage.getItem("user")||"{}"),e=n.kazetas.find(V=>V.id===this.kazetaId);this.kazeta=e;let r=e.zona,t=e.nombre,G=n.registrosAlimento?.[r]?.[t]?.at(-1),U=n.registrosMortalidad?.[r]?.[t]?.at(-1);this.alimento=G?.cantidad||null,this.mortalidad=U?.cantidad||null,this.editMode=!1}toggleEditMode(){this.editMode&&this.guardar(),this.editMode=!this.editMode}guardar(){if(!this.kazeta?.zona?.trim()||!this.kazeta?.nombre?.trim()||this.alimento===null||this.alimento<0||this.mortalidad===null||this.mortalidad<0){this.messageService.add({severity:"error",summary:"CAMPOS INV\xC1LIDOS",detail:"LLENA TODOS LOS CAMPOS"});return}this.loading=!0,setTimeout(()=>{this.messageService.add({severity:"success",summary:"\xC9XITO",detail:`DATOS GUARDADOS PARA: ${this.kazeta?.nombre}`}),this.loading=!1,this.editMode=!1},1e3)}static \u0275fac=function(o){return new(o||s)(c(T),c(F),c(f))};static \u0275cmp=M({type:s,selectors:[["app-kazeta-form"]],features:[v([f])],decls:24,vars:10,consts:[[1,"flex","justify-content-center","mt-4"],[1,"flex","center","p-8"],["pTemplate","header"],[1,"grid","p-4","gap-4"],[1,"field","col-12","md:col-6"],["for","zona"],["id","zona","type","text","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","nombre"],["id","nombre","type","text","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","alimento"],["id","alimento","type","number","pInputText","",3,"ngModelChange","ngModel","disabled"],["for","mortalidad"],["id","mortalidad","type","number","pInputText","",3,"ngModelChange","ngModel","disabled"],[1,"text-right","col-12"],["pButton","","type","button","icon","pi pi-pencil",3,"click","label","loading"],[1,"flex","flex-col","text-center"],[1,"text-2xl","font-semibold","mt-2","mb-3"],[1,"text-lg","text-color-secondary"]],template:function(o,e){o&1&&(h(0,"p-toast"),i(1,"div",0)(2,"div",1)(3,"p-card"),b(4,Z,5,1,"ng-template",2),i(5,"div",3)(6,"div",4)(7,"label",5),d(8,"ZONA: "),a(),i(9,"input",6),g("ngModelChange",function(t){return u(e.kazeta.zona,t)||(e.kazeta.zona=t),t}),a()(),i(10,"div",4)(11,"label",7),d(12,"NOMBRE"),a(),i(13,"input",8),g("ngModelChange",function(t){return u(e.kazeta.nombre,t)||(e.kazeta.nombre=t),t}),a()(),i(14,"div",4)(15,"label",9),d(16,"ULTIMO REGISTRO DE ALIMENTO (kg): "),a(),i(17,"input",10),g("ngModelChange",function(t){return u(e.alimento,t)||(e.alimento=t),t}),a()(),i(18,"div",4)(19,"label",11),d(20,"ULTIMO REGISTRO DE MORTALIDAD: "),a(),i(21,"input",12),g("ngModelChange",function(t){return u(e.mortalidad,t)||(e.mortalidad=t),t}),a()(),i(22,"div",13)(23,"button",14),z("click",function(){return e.toggleEditMode()}),a()()()()()()),o&2&&(l(9),p("ngModel",e.kazeta.zona),m("disabled",!e.editMode),l(4),p("ngModel",e.kazeta.nombre),m("disabled",!e.editMode),l(4),p("ngModel",e.alimento),m("disabled",!e.editMode),l(4),p("ngModel",e.mortalidad),m("disabled",!e.editMode),l(2),m("label",e.editMode?"GUARDAR":"EDITAR")("loading",e.loading))},dependencies:[C,E,I,D,A,k,w,R,N,_,W,L,O,B,P,K,x],encapsulation:2})};export{j as KazetaFormComponent};
