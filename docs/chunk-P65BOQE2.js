import{a as L,b as x}from"./chunk-VYT4VVOU.js";import{a as W,b as B}from"./chunk-C7GRVOAO.js";import{b as K,c as G}from"./chunk-FGSFZRNY.js";import{c as F,d as w}from"./chunk-F3B4DRXO.js";import{a as O}from"./chunk-3FZEPC3C.js";import"./chunk-GLSPFAUM.js";import{e as C}from"./chunk-EXJJF4RX.js";import{Cb as k,Eb as R,Gb as N,Ra as u,t as h,tb as E,ub as T,xb as _}from"./chunk-C37TLAZK.js";import{$a as y,Fb as z,Oa as m,Rb as l,Ta as d,Tb as A,Vb as f,Wb as g,Xb as b,Yb as D,mb as p,vb as i,wb as n,xb as s}from"./chunk-AN2PFFFI.js";import"./chunk-EQDQRRRY.js";var P=class v{constructor(a,o,e){this.route=a;this.dataService=o;this.messageService=e}kazetaId=0;kazeta=null;alimento=null;mortalidad=null;editando=!1;loading=!1;ngOnInit(){this.route.params.subscribe(a=>{this.kazetaId=+a.id,this.dataService.getData().subscribe(o=>{this.cargarKazeta(o)})})}cargarKazeta(a){let o=JSON.parse(localStorage.getItem("user")||"{}"),e=a.usuarios.find(c=>c.email===o.email),r=a.kazetas.find(c=>c.id===this.kazetaId);this.kazeta=r;let t=r.zona,M=r.nombre,S=a.registrosAlimento?.[t]?.[M]?.at(-1),I=a.registrosMortalidad?.[t]?.[M]?.at(-1);this.alimento=S?.cantidad||null,this.mortalidad=I?.cantidad||null,this.editando=!!(S||I)}guardar(){this.loading=!0,setTimeout(()=>{this.messageService.add({severity:"success",summary:"\xC9XITO",detail:`DATOS GUARDADOS PARA ${this.kazeta?.nombre}`,life:3e3}),this.loading=!1},1e3)}static \u0275fac=function(o){return new(o||v)(d(C),d(O),d(u))};static \u0275cmp=y({type:v,selectors:[["app-kazeta-form"]],features:[D([u])],decls:23,vars:8,consts:[[1,"flex","center","p-8"],["styleClass","grid grid-cols-12 gap-4"],[1,"text-2xl","font-semibold","text-center","mt-2","mb-7"],[1,"text-center","mb-10","text-lg","font-bold"],[1,"text-primary"],[1,"grid","p-4","gap-4"],[1,"flex-1"],["inputId","alimento",1,"w-full",3,"ngModelChange","ngModel","useGrouping"],["for","alimento"],["inputId","mortalidad",1,"w-full",3,"ngModelChange","ngModel","useGrouping"],["for","mortalidad"],[1,"text-right","mt-4"],["pButton","","type","button","icon","pi pi-save",1,"p-button-success","w-full","md:w-auto",3,"click","label","loading","disabled"]],template:function(o,e){o&1&&(i(0,"div",0),s(1,"p-toast"),i(2,"p-card",1)(3,"div",2),l(4," FORMULARIO DE REGISTRO "),n(),i(5,"div",3),l(6," N\xDAMERO DE KAZETA: "),i(7,"span",4),l(8),n()(),i(9,"div",5)(10,"p-floatlabel",6)(11,"p-inputNumber",7),b("ngModelChange",function(t){return g(e.alimento,t)||(e.alimento=t),t}),n(),s(12,"br"),i(13,"label",8),l(14,"ENTREGA DE ALIMENTO"),n()(),s(15,"br"),i(16,"p-floatlabel",6)(17,"p-inputNumber",9),b("ngModelChange",function(t){return g(e.mortalidad,t)||(e.mortalidad=t),t}),n(),s(18,"br"),i(19,"label",10),l(20,"TASA DE MORTALIDAD"),n()()(),i(21,"div",11)(22,"button",12),z("click",function(){return e.guardar()}),n()()()()),o&2&&(m(8),A(" ",e.kazeta==null?null:e.kazeta.nombre,""),m(3),f("ngModel",e.alimento),p("useGrouping",!1),m(6),f("ngModel",e.mortalidad),p("useGrouping",!1),m(5),p("label",e.editando?"GUARDAR":"EDITAR")("loading",e.loading)("disabled",e.loading))},dependencies:[h,_,E,T,N,w,F,x,L,R,k,B,W,G,K],encapsulation:2})};export{P as KazetaFormComponent};
